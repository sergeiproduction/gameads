import React from "react";
import { Link } from "react-router-dom";
import { useDispatch, useSelector } from "react-redux";
import { logout, selectIsAuth } from "../redux/slices/user";

const Header = ({ onSidebarToggle }) => {
  const dispatch = useDispatch();
  const isAuth = useSelector(selectIsAuth);

  const onClickLogout = () => {
    if (window.confirm("Вы действительно хотите выйти?")) {
      dispatch(logout());
      window.localStorage.removeItem("token");
    }
  };

  return (
    <header>
      <div className="header__left-section">
        <div
          className="sidebar__icon-wrapper"
          onClick={() => onSidebarToggle()}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24"
            viewBox="0 -960 960 960"
            width="24"
          >
            <path d="M120-120v-60h720v60H120Zm0-330v-60h720v60H120Zm0-330v-60h720v60H120Z" />
          </svg>
        </div>
        <div className="logo-wrapper">
          <Link to="/">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xlink="http://www.w3.org/1999/xlink"
              viewBox="0 0 1512.4 295.44"
            >
              <defs>
                <linearGradient
                  id="a"
                  x1="226.16"
                  x2="226.16"
                  y1="296.7"
                  y2="7.64"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop offset="0" stopColor="#f53" />
                  <stop offset="1" stopColor="#f93" />
                </linearGradient>
                <linearGradient
                  id="b"
                  x1="151.16"
                  x2="151.16"
                  y1="295.11"
                  y2="182.61"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop offset="0" stopColor="#b7123b" />
                  <stop offset="1" stopColor="#e61616" />
                </linearGradient>
                <linearGradient
                  href="#a"
                  id="c"
                  x1="76.16"
                  x2="76.16"
                  y1="296.7"
                  y2="7.64"
                />
              </defs>
              <path
                fill="url(#a)"
                d="M301.16 145.11a149.9 149.9 0 0 1-150 150A100 100 0 0 0 224 126.59h-.05a89.233 89.233 0 0 0-4.24-4.24A125.26 125.26 0 0 1 190.39.29a150.07 150.07 0 0 1 110.77 144.82z"
              />
              <path
                fill="url(#b)"
                d="M251.16 195.11a100 100 0 1 1-199.23-12.5 100 100 0 0 0 99.23 87.5 100 100 0 0 0 99.21-87.5 101 101 0 0 1 .79 12.5z"
              />
              <path
                fill="url(#c)"
                d="M151.16 295.11A150.1 150.1 0 0 1 5.59 108.81c.19-.81.4-1.63.63-2.43A50 50 0 0 1 53 70.12c2.24 0 4.45.13 6.66.28a124.35 124.35 0 0 1 69.58 27.11 98.84 98.84 0 0 0-26.54 10.09 100.15 100.15 0 0 0-48.42 62.51 98.88 98.88 0 0 0-2.38 12.5 100.15 100.15 0 0 0 77.37 110.09 99.9 99.9 0 0 0 21.89 2.41Z"
              />
              <path d="M452.16 240.06a94.43 94.43 0 0 1-35-6.36 84.13 84.13 0 0 1-28-17.88 80.49 80.49 0 0 1-18.36-27 87.08 87.08 0 0 1-6.48-34 87.08 87.08 0 0 1 6.48-34 79.66 79.66 0 0 1 18.48-27 85.79 85.79 0 0 1 28-17.88 94.17 94.17 0 0 1 35.16-6.36 97 97 0 0 1 33.84 5.76 69.84 69.84 0 0 1 26.6 17.36l-7.68 8.16a65 65 0 0 0-24.12-15.36 85.84 85.84 0 0 0-28.44-4.56 81.3 81.3 0 0 0-30.24 5.52 72.56 72.56 0 0 0-24.24 15.6 70.86 70.86 0 0 0-16 23.52 78.82 78.82 0 0 0 0 58.56 70.86 70.86 0 0 0 16 23.52 72.56 72.56 0 0 0 24.24 15.6 81.3 81.3 0 0 0 30.24 5.52 86.47 86.47 0 0 0 28.2-4.56 66 66 0 0 0 24.36-15.12l7 9.36a72.54 72.54 0 0 1-27 16.2 100.86 100.86 0 0 1-33.04 5.4zm48.24-22.8v-61.68h11.76v62.88zm95.52 22.56q-13.92 0-24.12-4.44a34.72 34.72 0 0 1-15.6-12.6 33.14 33.14 0 0 1-5.4-18.72 34.55 34.55 0 0 1 4.44-17.4q4.44-7.8 14.76-12.72t27.6-4.94h46.08v9.36h-45.84q-19.44 0-27.24 7.2a23.48 23.48 0 0 0-7.8 18q0 12 9.12 19.2T597.6 230q15.84 0 26.76-7.2t16.2-20.88l3.36 8.16a43.46 43.46 0 0 1-17.16 21.72q-12.12 8.02-30.84 8.02zm45.12-1V210.3l-.48-4.32v-47q0-17.52-9.48-26.64t-27.72-9.12a65.92 65.92 0 0 0-43.2 15.78l-6-8.64a66.69 66.69 0 0 1 22.56-13.08 82 82 0 0 1 27.6-4.68q23.28 0 35.76 11.76t12.48 35v79.44zM858 112.62q15.12 0 26.28 5.88a41.08 41.08 0 0 1 17.4 17.76q6.23 11.88 6.24 29.4v73.2h-12v-72.24q0-21.12-10.32-32.16t-28.8-11q-14.17 0-24.48 6a40.07 40.07 0 0 0-15.84 16.8Q810.95 157 811 172.14v66.72h-12v-72.24q0-21.12-10.32-32.16t-28.8-11q-14.18 0-24.48 6a40.07 40.07 0 0 0-15.84 16.8Q714 157 714 172.14v66.72h-12V113.58h11.52v34.56l-1.68-3.84a46.77 46.77 0 0 1 18.48-23.16q13-8.52 31.2-8.52 18.72 0 31.56 9.48t16.2 28.2l-4.08-1.68a49.47 49.47 0 0 1 19-26q13.87-10 33.8-10zm150.23 127.2q-19 0-33.48-8.16A59.3 59.3 0 0 1 952 209.1q-8.28-14.4-8.29-32.88 0-18.72 7.8-33A57.91 57.91 0 0 1 973 120.78a58.78 58.78 0 0 1 30.71-8.16 59.6 59.6 0 0 1 30.61 7.92 56.54 56.54 0 0 1 21.35 22.2q7.8 14.28 7.81 33a11.17 11.17 0 0 1-.13 1.56 12.8 12.8 0 0 0-.11 1.8H952.55v-9.36h104.16l-4.79 4.56a52.18 52.18 0 0 0-6.13-26.28 47.72 47.72 0 0 0-17.16-18.24q-10.79-6.6-25-6.6a47.07 47.07 0 0 0-24.84 6.6A46.55 46.55 0 0 0 961.67 148a55.24 55.24 0 0 0-6.23 26.52v2.16q0 15.36 6.84 27.24a48 48 0 0 0 18.84 18.48 55.76 55.76 0 0 0 27.35 6.6 58.15 58.15 0 0 0 22.45-4.32 44.07 44.07 0 0 0 17.63-13.2l7 7.92a51.56 51.56 0 0 1-20.55 15.26 68.85 68.85 0 0 1-26.77 5.16Zm68.16-.96 77.28-168h12.24l77.28 168H1230l-73-160.32h5.28l-72.72 160.32Zm28.32-47.28 4.08-10.32h100.56l4.08 10.32Zm212.19 48.24a62.36 62.36 0 0 1-31.56-8 58.65 58.65 0 0 1-22.2-22.44q-8.16-14.4-8.16-33.12 0-19 8.16-33.24a58.89 58.89 0 0 1 22.2-22.32 62.36 62.36 0 0 1 31.56-8 58.73 58.73 0 0 1 29.88 7.68 55.52 55.52 0 0 1 21.12 21.84q7.8 14.16 7.8 34.08 0 19.44-7.68 33.84a54.33 54.33 0 0 1-21 22.08 59.2 59.2 0 0 1-30.12 7.6zm.72-10.8a50.55 50.55 0 0 0 25.8-6.6 47.39 47.39 0 0 0 18-18.6q6.6-12 6.6-27.6 0-15.84-6.6-27.72a47.61 47.61 0 0 0-18-18.48 53.73 53.73 0 0 0-51.6 0 47.61 47.61 0 0 0-18 18.48q-6.6 11.88-6.6 27.72 0 15.6 6.6 27.6a47.39 47.39 0 0 0 18 18.6 50.55 50.55 0 0 0 25.8 6.58zm50.64 9.84v-41l2.16-21.84-2.4-21.84v-93.4h12v178.08zm94.04.96a90.91 90.91 0 0 1-29.16-4.56q-13.56-4.56-21-11.52l5.52-9.6q7.2 6.24 19.2 10.68a74.12 74.12 0 0 0 25.92 4.44q19.68 0 28.32-6.48a20.3 20.3 0 0 0 8.64-17q0-7.68-4.44-12.12a29.16 29.16 0 0 0-11.88-6.84 122 122 0 0 0-16.32-4q-8.88-1.56-17.76-3.48a72.51 72.51 0 0 1-16.32-5.52 30.22 30.22 0 0 1-11.88-10q-4.44-6.36-4.44-16.92a29.79 29.79 0 0 1 5.28-17.28q5.28-7.68 15.84-12.36t26.4-4.68a86.53 86.53 0 0 1 23.64 3.36q11.88 3.36 19.32 8.88l-5.52 9.6a51 51 0 0 0-17.76-8.64 76.55 76.55 0 0 0-19.92-2.64q-18.24 0-26.76 6.72t-8.52 16.8q0 7.92 4.44 12.6a28.71 28.71 0 0 0 11.88 7.2 110.52 110.52 0 0 0 16.32 4.08q8.88 1.56 17.76 3.48a76.61 76.61 0 0 1 16.32 5.4 30.16 30.16 0 0 1 11.88 9.6q4.44 6.12 4.44 16.44a29.59 29.59 0 0 1-5.64 18q-5.64 7.68-16.68 12t-27.12 4.36z" />
            </svg>
          </Link>
        </div>
      </div>
      <div className="header__right-section">
        {isAuth ? (
          <div onClick={onClickLogout} className="avatar-wrapper">
            <img src="/img/empty_icon.png" alt="Avatar" />
          </div>
        ) : (
          <Link to="/login">
            <button>Войти</button>
          </Link>
        )}
      </div>
    </header>
  );
};

export default Header;
